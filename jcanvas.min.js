/*
 jCanvas v14.09.27
 Copyright 2014 Caleb Evans
 Released under the MIT license
*/
(function(g,va,wa,Sa,ba,$,p,w,h,k){function H(d){for(var c in d)d.hasOwnProperty(c)&&(this[c]=d[c]);return this}function ma(){Y(this,ma.baseDefaults)}function ha(d){return"string"===Z(d)}function J(d){return d&&d.getContext?d.getContext("2d"):h}function ia(d){var c,a,b;for(c in d)d.hasOwnProperty(c)&&(b=d[c],a=Z(b),"string"!==a||""===b||isNaN(b)||(d[c]=$(b)));d.text!==k&&(d.text=String(d.text))}function ja(d){d=Y({},d);d.masks=d.masks.slice(0);return d}function da(d,c){var a;d.save();a=ja(c.transforms);
c.savedTransforms.push(a)}function xa(d,c,a,b){a[b]&&(ca(a[b])?c[b]=a[b].call(d,a):c[b]=a[b])}function R(d,c,a){xa(d,c,a,"fillStyle");xa(d,c,a,"strokeStyle");c.lineWidth=a.strokeWidth;a.rounded?c.lineCap=c.lineJoin="round":(c.lineCap=a.strokeCap,c.lineJoin=a.strokeJoin,c.miterLimit=a.miterLimit);a.strokeDash||(a.strokeDash=[]);c.setLineDash&&c.setLineDash(a.strokeDash);c.webkitLineDash=c.mozDash=a.strokeDash;c.lineDashOffset=c.webkitLineDashOffset=c.mozDashOffset=a.strokeDashOffset;c.shadowOffsetX=
a.shadowX;c.shadowOffsetY=a.shadowY;c.shadowBlur=a.shadowBlur;c.shadowColor=a.shadowColor;c.globalAlpha=a.opacity;c.globalCompositeOperation=a.compositing;a.imageSmoothing&&(c.webkitImageSmoothingEnabled=c.mozImageSmoothingEnabled=a.imageSmoothing)}function ya(d,c,a){a.mask&&(a.autosave&&da(d,c),d.clip(),c.transforms.masks.push(a._args))}function V(d,c,a){a.closed&&c.closePath();a.shadowStroke&&0!==a.strokeWidth?(c.stroke(),c.fill(),c.shadowColor="transparent",c.shadowBlur=0,c.stroke()):(c.fill(),
"transparent"!==a.fillStyle&&(c.shadowColor="transparent"),0!==a.strokeWidth&&c.stroke());a.closed||c.closePath();a._transformed&&c.restore();a.mask&&(d=E(d),ya(c,d,a))}function Q(d,c,a,b,f){a._toRad=a.inDegrees?D/180:1;a._transformed=p;c.save();a.fromCenter||a._centered||b===k||(f===k&&(f=b),a.x+=b/2,a.y+=f/2,a._centered=p);a.rotate&&za(c,a,h);1===a.scale&&1===a.scaleX&&1===a.scaleY||Aa(c,a,h);(a.translate||a.translateX||a.translateY)&&Ba(c,a,h)}function E(d){var c=aa.dataCache,a;c._canvas===d&&
c._data?a=c._data:(a=g.data(d,"jCanvas"),a||(a={canvas:d,layers:[],layer:{names:{},groups:{}},eventHooks:{},intersecting:[],lastIntersected:h,cursor:g(d).css("cursor"),drag:{layer:h,dragging:w},event:{type:h,x:h,y:h},events:{},transforms:ja(na),savedTransforms:[],animating:w,animated:h,pixelRatio:1,scaled:w},g.data(d,"jCanvas",a)),c._canvas=d,c._data=a);return a}function Ca(d,c,a){for(var b in X.events)X.events.hasOwnProperty(b)&&(a[b]||a.cursors&&a.cursors[b])&&Da(d,c,a,b);c.events.mouseout||(d.bind("mouseout.jCanvas",
function(){var a=c.drag.layer,b;a&&(c.drag={},N(d,c,a,"dragcancel"));for(b=0;b<c.layers.length;b+=1)a=c.layers[b],a._hovered&&d.triggerLayerEvent(c.layers[b],"mouseout");d.drawLayers()}),c.events.mouseout=p)}function Da(d,c,a,b){X.events[b](d,c);a._event=p}function Ea(d,c,a){var b,f,e;if(a.draggable||a.cursors){b=["mousedown","mousemove","mouseup"];for(e=0;e<b.length;e+=1)f=b[e],Da(d,c,a,f);a._event=p}}function oa(d,c,a,b){d=c.layer.names;b?b.name!==k&&ha(a.name)&&a.name!==b.name&&delete d[a.name]:
b=a;ha(b.name)&&(d[b.name]=a)}function pa(d,c,a,b){d=c.layer.groups;var f,e,l,g;if(!b)b=a;else if(b.groups!==k&&a.groups!==h)for(e=0;e<a.groups.length;e+=1)if(f=a.groups[e],c=d[f]){for(g=0;g<c.length;g+=1)if(c[g]===a){l=g;c.splice(g,1);break}0===c.length&&delete d[f]}if(b.groups!==k&&b.groups!==h)for(e=0;e<b.groups.length;e+=1)f=b.groups[e],c=d[f],c||(c=d[f]=[],c.name=f),l===k&&(l=c.length),c.splice(l,0,a)}function qa(d,c,a,b,f){b[a]&&c._running&&!c._running[a]&&(c._running[a]=p,b[a].call(d[0],c,
f),c._running[a]=w)}function N(d,c,a,b,f){if(!(a.disableEvents||a.intangible&&-1!==g.inArray(b,Ua))){if("mouseout"!==b){var e;a.cursors&&(e=a.cursors[b]);-1!==g.inArray(e,U.cursors)&&(e=U.prefix+e);e&&d.css({cursor:e})}qa(d,a,b,a,f);qa(d,a,b,c.eventHooks,f);qa(d,a,b,X.eventHooks,f)}}function M(d,c,a,b){var f,e=c._layer?a:c;c._args=a;if(c.draggable||c.dragGroups)c.layer=p,c.draggable=p;c._method=b?b:c.method?g.fn[c.method]:c.type?g.fn[W.drawings[c.type]]:function(){};if(c.layer&&!c._layer){if(a=g(d),
b=E(d),f=b.layers,e.name===h||ha(e.name)&&b.layer.names[e.name]===k)ia(c),e=new H(c),e.canvas=d,e.layer=p,e._layer=p,e._running={},e.data=e.data!==h?Y({},e.data):{},e.groups=e.groups!==h?e.groups.slice(0):[],oa(a,b,e),pa(a,b,e),Ca(a,b,e),Ea(a,b,e),c._event=e._event,e._method===g.fn.drawText&&a.measureText(e),e.index===h&&(e.index=f.length),f.splice(e.index,0,e),c._args=e,N(a,b,e,"add")}else c.layer||ia(c);return e}function Fa(d,c){var a,b;for(b=0;b<U.props.length;b+=1)a=U.props[b],d[a]!==k&&(d["_"+
a]=d[a],U.propsObj[a]=p,c&&delete d[a])}function Va(d,c,a){var b,f,e,l;for(b in a)if(a.hasOwnProperty(b)&&(f=a[b],ca(f)&&(a[b]=f.call(d,c,b)),"object"===Z(f)&&Ga(f))){for(e in f)f.hasOwnProperty(e)&&(l=f[e],c[b]!==k&&(c[b+"."+e]=c[b][e],a[b+"."+e]=l));delete a[b]}return a}function Ha(d){var c,a,b=[],f=1;d.match(/^([a-z]+|#[0-9a-f]+)$/gi)&&("transparent"===d&&(d="rgba(0, 0, 0, 0)"),a=va.head,c=a.style.color,a.style.color=d,d=g.css(a,"color"),a.style.color=c);d.match(/^rgb/gi)&&(b=d.match(/(\d+(\.\d+)?)/gi),
d.match(/%/gi)&&(f=2.55),b[0]*=f,b[1]*=f,b[2]*=f,b[3]=b[3]!==k?$(b[3]):1);return b}function Wa(d){var c=3,a;"array"!==Z(d.start)&&(d.start=Ha(d.start),d.end=Ha(d.end));d.now=[];if(1!==d.start[3]||1!==d.end[3])c=4;for(a=0;a<c;a+=1)d.now[a]=d.start[a]+(d.end[a]-d.start[a])*d.pos,3>a&&(d.now[a]=Xa(d.now[a]));1!==d.start[3]||1!==d.end[3]?d.now="rgba( "+d.now.join(",")+" )":(d.now.slice(0,3),d.now="rgb( "+d.now.join(",")+" )");d.elem.nodeName?d.elem.style[d.prop]=d.now:d.elem[d.prop]=d.now}function Ya(d){W.touchEvents[d]&&
(d=W.touchEvents[d]);return d}function Za(d){X.events[d]=function(c,a){function b(a){l.x=a.offsetX;l.y=a.offsetY;l.type=f;l.event=a;c.drawLayers({resetFire:p});a.preventDefault()}var f,e,l;l=a.event;f="mouseover"===d||"mouseout"===d?"mousemove":d;e=Ya(f);a.events[f]||(e!==f?c.bind(f+".jCanvas "+e+".jCanvas",b):c.bind(f+".jCanvas",b),a.events[f]=p)}}function S(d,c,a){var b,f,e,l;if(a=a._args)d=E(d),b=d.event,b.x!==h&&b.y!==h&&(e=b.x*d.pixelRatio,l=b.y*d.pixelRatio,f=c.isPointInPath(e,l)||c.isPointInStroke&&
c.isPointInStroke(e,l)),c=d.transforms,a.eventX=b.x,a.eventY=b.y,a.event=b.event,b=d.transforms.rotate,e=a.eventX,l=a.eventY,0!==b?(a._eventX=e*K(-b)-l*O(-b),a._eventY=l*K(-b)+e*O(-b)):(a._eventX=e,a._eventY=l),a._eventX/=c.scaleX,a._eventY/=c.scaleY,f&&d.intersecting.push(a),a.intersects=!!f}function za(d,c,a){c._toRad=c.inDegrees?D/180:1;d.translate(c.x,c.y);d.rotate(c.rotate*c._toRad);d.translate(-c.x,-c.y);a&&(a.rotate+=c.rotate*c._toRad)}function Aa(d,c,a){1!==c.scale&&(c.scaleX=c.scaleY=c.scale);
d.translate(c.x,c.y);d.scale(c.scaleX,c.scaleY);d.translate(-c.x,-c.y);a&&(a.scaleX*=c.scaleX,a.scaleY*=c.scaleY)}function Ba(d,c,a){c.translate&&(c.translateX=c.translateY=c.translate);d.translate(c.translateX,c.translateY);a&&(a.translateX+=c.translateX,a.translateY+=c.translateY)}function Ia(d){for(;0>d;)d+=2*D;return d}function Ja(d,c,a,b){var f,e,l,g,u,y,x;a===b?x=y=0:(y=a.x,x=a.y);b.inDegrees||360!==b.end||(b.end=2*D);b.start*=a._toRad;b.end*=a._toRad;b.start-=D/2;b.end-=D/2;u=D/180;b.ccw&&
(u*=-1);f=b.x+b.radius*K(b.start+u);e=b.y+b.radius*O(b.start+u);l=b.x+b.radius*K(b.start);g=b.y+b.radius*O(b.start);ea(d,c,a,b,f,e,l,g);c.arc(b.x+y,b.y+x,b.radius,b.start,b.end,b.ccw);f=b.x+b.radius*K(b.end+u);u=b.y+b.radius*O(b.end+u);e=b.x+b.radius*K(b.end);l=b.y+b.radius*O(b.end);fa(d,c,a,b,e,l,f,u)}function Ka(d,c,a,b,f,e,l,g){var u,y;b.arrowRadius&&!a.closed&&(y=$a(g-e,l-f),y-=D,d=a.strokeWidth*K(y),u=a.strokeWidth*O(y),a=l+b.arrowRadius*K(y+b.arrowAngle/2),f=g+b.arrowRadius*O(y+b.arrowAngle/
2),e=l+b.arrowRadius*K(y-b.arrowAngle/2),b=g+b.arrowRadius*O(y-b.arrowAngle/2),c.moveTo(a-d,f-u),c.lineTo(l-d,g-u),c.lineTo(e-d,b-u),c.moveTo(l-d,g-u),c.lineTo(l+d,g+u),c.moveTo(l,g))}function ea(d,c,a,b,f,e,l,g){b._arrowAngleConverted||(b.arrowAngle*=a._toRad,b._arrowAngleConverted=p);b.startArrow&&Ka(d,c,a,b,f,e,l,g)}function fa(d,c,a,b,f,e,l,g){b._arrowAngleConverted||(b.arrowAngle*=a._toRad,b._arrowAngleConverted=p);b.endArrow&&Ka(d,c,a,b,f,e,l,g)}function La(d,c,a,b){var f,e,l;f=2;ea(d,c,a,b,
b.x2+a.x,b.y2+a.y,b.x1+a.x,b.y1+a.y);for(b.x1!==k&&b.y1!==k&&c.moveTo(b.x1+a.x,b.y1+a.y);p;)if(e=b["x"+f],l=b["y"+f],e!==k&&l!==k)c.lineTo(e+a.x,l+a.y),f+=1;else break;f-=1;fa(d,c,a,b,b["x"+(f-1)]+a.x,b["y"+(f-1)]+a.y,b["x"+f]+a.x,b["y"+f]+a.y)}function Ma(d,c,a,b){var f,e,l,g,u;f=2;ea(d,c,a,b,b.cx1+a.x,b.cy1+a.y,b.x1+a.x,b.y1+a.y);for(b.x1!==k&&b.y1!==k&&c.moveTo(b.x1+a.x,b.y1+a.y);p;)if(e=b["x"+f],l=b["y"+f],g=b["cx"+(f-1)],u=b["cy"+(f-1)],e!==k&&l!==k&&g!==k&&u!==k)c.quadraticCurveTo(g+a.x,u+a.y,
e+a.x,l+a.y),f+=1;else break;f-=1;fa(d,c,a,b,b["cx"+(f-1)]+a.x,b["cy"+(f-1)]+a.y,b["x"+f]+a.x,b["y"+f]+a.y)}function Na(d,c,a,b){var f,e,l,g,u,y,x,h;f=2;e=1;ea(d,c,a,b,b.cx1+a.x,b.cy1+a.y,b.x1+a.x,b.y1+a.y);for(b.x1!==k&&b.y1!==k&&c.moveTo(b.x1+a.x,b.y1+a.y);p;)if(l=b["x"+f],g=b["y"+f],u=b["cx"+e],y=b["cy"+e],x=b["cx"+(e+1)],h=b["cy"+(e+1)],l!==k&&g!==k&&u!==k&&y!==k&&x!==k&&h!==k)c.bezierCurveTo(u+a.x,y+a.y,x+a.x,h+a.y,l+a.x,g+a.y),f+=1,e+=2;else break;f-=1;e-=2;fa(d,c,a,b,b["cx"+(e+1)]+a.x,b["cy"+
(e+1)]+a.y,b["x"+f]+a.x,b["y"+f]+a.y)}function Oa(d,c,a){c*=d._toRad;c-=D/2;return a*K(c)}function Pa(d,c,a){c*=d._toRad;c-=D/2;return a*O(c)}function Qa(d,c,a,b){var f,e,l,g,u,h,x;a===b?u=g=0:(g=a.x,u=a.y);f=1;e=g=h=b.x+g;l=u=x=b.y+u;ea(d,c,a,b,e+Oa(a,b.a1,b.l1),l+Pa(a,b.a1,b.l1),e,l);for(b.x!==k&&b.y!==k&&c.moveTo(e,l);p;)if(e=b["a"+f],l=b["l"+f],e!==k&&l!==k)g=h,u=x,h+=Oa(a,e,l),x+=Pa(a,e,l),c.lineTo(h,x),f+=1;else break;fa(d,c,a,b,g,u,h,x)}function ra(d,c,a){isNaN(Number(a.fontSize))||(a.fontSize+=
"px");c.font=a.fontStyle+" "+a.fontSize+" "+a.fontFamily}function sa(d,c,a,b){var f,e;f=aa.propCache;if(f.text===a.text&&f.fontStyle===a.fontStyle&&f.fontSize===a.fontSize&&f.fontFamily===a.fontFamily&&f.maxWidth===a.maxWidth&&f.lineHeight===a.lineHeight)a.width=f.width,a.height=f.height;else{a.width=c.measureText(b[0]).width;for(e=1;e<b.length;e+=1)f=c.measureText(b[e]).width,f>a.width&&(a.width=f);c=d.style.fontSize;d.style.fontSize=a.fontSize;a.height=$(g.css(d,"fontSize"))*b.length*a.lineHeight;
d.style.fontSize=c}}function Ra(d,c){var a=c.maxWidth,b=c.text.split("\n"),f=[],e,l,g,u,h;for(g=0;g<b.length;g+=1){u=b[g];h=u.split(" ");e=[];l="";if(1===h.length||d.measureText(u).width<a)e=[u];else{for(u=0;u<h.length;u+=1)d.measureText(l+h[u]).width>a&&(""!==l&&e.push(l),l=""),l+=h[u],u!==h.length-1&&(l+=" ");e.push(l)}f=f.concat(e.join("\n").replace(/( (\n))|( $)/gi,"$2").split("\n"))}return f}var la,Y=g.extend,ga=g.inArray,Z=g.type,ca=g.isFunction,Ga=g.isPlainObject,D=ba.PI,Xa=ba.round,ab=ba.abs,
O=ba.sin,K=ba.cos,$a=ba.atan2,ta=Sa.prototype.slice,bb=g.event.fix,W={},aa={dataCache:{},propCache:{},imageCache:{}},na={rotate:0,scaleX:1,scaleY:1,translateX:0,translateY:0,masks:[]},U={},Ua="mousedown mousemove mouseup mouseover mouseout touchstart touchmove touchend".split(" "),X={events:{},eventHooks:{},future:{}};ma.baseDefaults={align:"center",arrowAngle:90,arrowRadius:0,autosave:p,baseline:"middle",bringToFront:w,ccw:w,closed:w,compositing:"source-over",concavity:0,cornerRadius:0,count:1,cropFromCenter:p,
crossOrigin:"",cursors:h,disableEvents:w,draggable:w,dragGroups:h,groups:h,data:h,dx:h,dy:h,end:360,eventX:h,eventY:h,fillStyle:"transparent",fontStyle:"normal",fontSize:"12pt",fontFamily:"sans-serif",fromCenter:p,height:h,imageSmoothing:p,inDegrees:p,intangible:w,index:h,letterSpacing:h,lineHeight:1,layer:w,mask:w,maxWidth:h,miterLimit:10,name:h,opacity:1,r1:h,r2:h,radius:0,repeat:"repeat",respectAlign:w,rotate:0,rounded:w,scale:1,scaleX:1,scaleY:1,shadowBlur:0,shadowColor:"transparent",shadowStroke:w,
shadowX:0,shadowY:0,sHeight:h,sides:0,source:"",spread:0,start:0,strokeCap:"butt",strokeDash:h,strokeDashOffset:0,strokeJoin:"miter",strokeStyle:"transparent",strokeWidth:1,sWidth:h,sx:h,sy:h,text:"",translate:0,translateX:0,translateY:0,type:h,visible:p,width:h,x:0,y:0};la=new ma;H.prototype=la;X.extend=function(d){d.name&&(d.props&&Y(la,d.props),g.fn[d.name]=function a(b){var f,e,l,g;for(e=0;e<this.length;e+=1)if(f=this[e],l=J(f))g=new H(b),M(f,g,b,a),R(f,l,g),d.fn.call(f,l,g);return this},d.type&&
(W.drawings[d.type]=d.name));return g.fn[d.name]};g.fn.getEventHooks=function(){var d;d={};0!==this.length&&(d=this[0],d=E(d),d=d.eventHooks);return d};g.fn.setEventHooks=function(d){var c,a;for(c=0;c<this.length;c+=1)g(this[c]),a=E(this[c]),Y(a.eventHooks,d);return this};g.fn.getLayers=function(d){var c,a,b,f,e=[];if(0!==this.length)if(c=this[0],a=E(c),a=a.layers,ca(d))for(f=0;f<a.length;f+=1)b=a[f],d.call(c,b)&&e.push(b);else e=a;return e};g.fn.getLayer=function(d){var c,a,b,f;if(0!==this.length)if(c=
this[0],a=E(c),c=a.layers,f=Z(d),d&&d.layer)b=d;else if("number"===f)0>d&&(d=c.length+d),b=c[d];else if("regexp"===f)for(a=0;a<c.length;a+=1){if(ha(c[a].name)&&c[a].name.match(d)){b=c[a];break}}else b=a.layer.names[d];return b};g.fn.getLayerGroup=function(d){var c,a,b,f=Z(d);if(0!==this.length)if(c=this[0],"array"===f)b=d;else if("regexp"===f)for(a in c=E(c),c=c.layer.groups,c){if(a.match(d)){b=c[a];break}}else c=E(c),b=c.layer.groups[d];return b};g.fn.getLayerIndex=function(d){var c=this.getLayers();
d=this.getLayer(d);return ga(d,c)};g.fn.setLayer=function(d,c){var a,b,f,e,l,h,u;for(b=0;b<this.length;b+=1)if(a=g(this[b]),f=E(this[b]),e=g(this[b]).getLayer(d)){oa(a,f,e,c);pa(a,f,e,c);ia(c);for(l in c)c.hasOwnProperty(l)&&(h=c[l],u=Z(h),"object"===u&&Ga(h)?(e[l]=Y({},h),ia(e[l])):"array"===u?e[l]=h.slice(0):"string"===u?0===h.indexOf("+=")?e[l]+=$(h.substr(2)):0===h.indexOf("-=")?e[l]-=$(h.substr(2)):isNaN(h)?e[l]=h:e[l]=$(h):e[l]=h);Ca(a,f,e);Ea(a,f,e);g.isEmptyObject(c)===w&&N(a,f,e,"change",
c)}return this};g.fn.setLayers=function(d,c){var a,b,f,e;for(b=0;b<this.length;b+=1)for(a=g(this[b]),f=a.getLayers(c),e=0;e<f.length;e+=1)a.setLayer(f[e],d);return this};g.fn.setLayerGroup=function(d,c){var a,b,f,e;for(b=0;b<this.length;b+=1)if(a=g(this[b]),f=a.getLayerGroup(d))for(e=0;e<f.length;e+=1)a.setLayer(f[e],c);return this};g.fn.moveLayer=function(d,c){var a,b,f,e,l;for(b=0;b<this.length;b+=1)if(a=g(this[b]),f=E(this[b]),e=f.layers,l=a.getLayer(d))l.index=ga(l,e),e.splice(l.index,1),e.splice(c,
0,l),0>c&&(c=e.length+c),l.index=c,N(a,f,l,"move");return this};g.fn.removeLayer=function(d){var c,a,b,f,e;for(a=0;a<this.length;a+=1)if(c=g(this[a]),b=E(this[a]),f=c.getLayers(),e=c.getLayer(d))e.index=ga(e,f),f.splice(e.index,1),oa(c,b,e,{name:h}),pa(c,b,e,{groups:h}),N(c,b,e,"remove");return this};g.fn.removeLayers=function(d){var c,a,b,f,e,l;for(a=0;a<this.length;a+=1){c=g(this[a]);b=E(this[a]);f=c.getLayers(d);for(l=0;l<f.length;l+=1)e=f[l],c.removeLayer(e),l-=1;b.layer.names={};b.layer.groups=
{}}return this};g.fn.removeLayerGroup=function(d){var c,a,b,f;if(d!==k)for(a=0;a<this.length;a+=1)if(c=g(this[a]),E(this[a]),c.getLayers(),b=c.getLayerGroup(d))for(b=b.slice(0),f=0;f<b.length;f+=1)c.removeLayer(b[f]);return this};g.fn.addLayerToGroup=function(d,c){var a,b,f,e=[c];for(b=0;b<this.length;b+=1)a=g(this[b]),f=a.getLayer(d),f.groups&&(e=f.groups.slice(0),-1===ga(c,f.groups)&&e.push(c)),a.setLayer(f,{groups:e});return this};g.fn.removeLayerFromGroup=function(d,c){var a,b,f,e=[],l;for(b=
0;b<this.length;b+=1)a=g(this[b]),f=a.getLayer(d),f.groups&&(l=ga(c,f.groups),-1!==l&&(e=f.groups.slice(0),e.splice(l,1),a.setLayer(f,{groups:e})));return this};U.cursors=["grab","grabbing","zoom-in","zoom-out"];U.prefix=function(){var d=getComputedStyle(va.documentElement,"");return"-"+(ta.call(d).join("").match(/-(moz|webkit|ms)-/)||""===d.OLink&&["","o"])[1]+"-"}();g.fn.triggerLayerEvent=function(d,c){var a,b,f;for(b=0;b<this.length;b+=1)a=g(this[b]),f=E(this[b]),(d=a.getLayer(d))&&N(a,f,d,c);
return this};g.fn.drawLayer=function(d){var c,a,b;for(c=0;c<this.length;c+=1)b=g(this[c]),(a=J(this[c]))&&(a=b.getLayer(d))&&a.visible&&a._method&&(a._next=h,a._method.call(b,a));return this};g.fn.drawLayers=function(d){var c,a,b=d||{},f,e,l,k,u,y,x,ka;(k=b.index)||(k=0);for(c=0;c<this.length;c+=1)if(d=g(this[c]),a=J(this[c])){u=E(this[c]);b.clear!==w&&d.clearCanvas();a=u.layers;for(l=k;l<a.length;l+=1)if(f=a[l],f.index=l,b.resetFire&&(f._fired=w),y=d,x=f,e=l+1,x&&x.visible&&x._method&&(x._next=e?
e:h,x._method.call(y,x)),f._masks=u.transforms.masks.slice(0),f._method===g.fn.drawImage&&f.visible){ka=!0;break}if(ka)break;f=u;var A=e=x=y=void 0;y=h;for(x=f.intersecting.length-1;0<=x;x-=1)if(y=f.intersecting[x],y._masks){for(A=y._masks.length-1;0<=A;A-=1)if(e=y._masks[A],!e.intersects){y.intersects=w;break}if(y.intersects&&!y.intangible)break}y&&y.intangible&&(y=h);f=y;y=u.event;x=y.type;if(u.drag.layer){e=d;var A=u,L=x,z=void 0,q=void 0,n=void 0,F=n=void 0,I=void 0,n=z=z=n=void 0,n=A.drag,F=
(q=n.layer)&&q.dragGroups||[],z=A.layers;if("mousemove"===L||"touchmove"===L){if(n.dragging||(n.dragging=p,q.dragging=p,q.bringToFront&&(z.splice(q.index,1),q.index=z.push(q)),q._startX=q.x,q._startY=q.y,q._endX=q._eventX,q._endY=q._eventY,N(e,A,q,"dragstart")),n.dragging)for(z=q._eventX-(q._endX-q._startX),n=q._eventY-(q._endY-q._startY),q.dx=z-q.x,q.dy=n-q.y,q.x=z,q.y=n,N(e,A,q,"drag"),z=0;z<F.length;z+=1)if(n=F[z],I=A.layer.groups[n],q.groups&&I)for(n=0;n<I.length;n+=1)I[n]!==q&&(I[n].x+=q.dx,
I[n].y+=q.dy)}else if("mouseup"===L||"touchend"===L)n.dragging&&(q.dragging=w,n.dragging=w,N(e,A,q,"dragstop")),A.drag={}}e=u.lastIntersected;e===h||f===e||!e._hovered||e._fired||u.drag.dragging||(u.lastIntersected=h,e._fired=p,e._hovered=w,N(d,u,e,"mouseout"),d.css({cursor:u.cursor}));f&&(f[x]||W.mouseEvents[x]&&(x=W.mouseEvents[x]),f._event&&f.intersects&&(u.lastIntersected=f,!(f.mouseover||f.mouseout||f.cursors)||u.drag.dragging||f._hovered||f._fired||(f._fired=p,f._hovered=p,N(d,u,f,"mouseover")),
f._fired||(f._fired=p,y.type=h,N(d,u,f,x)),!f.draggable||f.disableEvents||"mousedown"!==x&&"touchstart"!==x||(u.drag.layer=f)));f!==h||u.drag.dragging||d.css({cursor:u.cursor});l===a.length&&(u.intersecting.length=0,u.transforms=ja(na),u.savedTransforms.length=0)}return this};g.fn.addLayer=function(d){var c,a;for(c=0;c<this.length;c+=1)if(a=J(this[c]))a=new H(d),a.layer=p,M(this[c],a,d);return this};U.props=["width","height","opacity","lineHeight"];U.propsObj={};g.fn.animateLayer=function(){function d(a,
b,c){return function(){var d,f;for(f=0;f<U.props.length;f+=1)d=U.props[f],c[d]=c["_"+d];for(var l in c)c.hasOwnProperty(l)&&-1!==l.indexOf(".")&&delete c[l];b.animating&&b.animated!==c||a.drawLayers();c._animating=w;b.animating=w;b.animated=h;e[4]&&e[4].call(a[0],c);N(a,b,c,"animateend")}}function c(a,b,c){return function(d,f){var l,g,h=!1;"_"===f.prop[0]&&(h=!0,f.prop=f.prop.replace("_",""),c[f.prop]=c["_"+f.prop]);-1!==f.prop.indexOf(".")&&(l=f.prop.split("."),g=l[0],l=l[1],c[g]&&(c[g][l]=f.now));
c._pos!==f.pos&&(c._pos=f.pos,c._animating||b.animating||(c._animating=p,b.animating=p,b.animated=c),b.animating&&b.animated!==c||a.drawLayers());e[5]&&e[5].call(a[0],d,f,c);N(a,b,c,"animate",f);h&&(f.prop="_"+f.prop)}}var a,b,f,e=ta.call(arguments,0),l,H;"object"===Z(e[2])?(e.splice(2,0,e[2].duration||h),e.splice(3,0,e[3].easing||h),e.splice(4,0,e[4].complete||h),e.splice(5,0,e[5].step||h)):(e[2]===k?(e.splice(2,0,h),e.splice(3,0,h),e.splice(4,0,h)):ca(e[2])&&(e.splice(2,0,h),e.splice(3,0,h)),e[3]===
k?(e[3]=h,e.splice(4,0,h)):ca(e[3])&&e.splice(3,0,h));for(b=0;b<this.length;b+=1)if(a=g(this[b]),f=J(this[b]))f=E(this[b]),(l=a.getLayer(e[0]))&&l._method!==g.fn.draw&&(H=Y({},e[1]),H=Va(this[b],l,H),Fa(H,p),Fa(l),l.style=U.propsObj,g(l).animate(H,{duration:e[2],easing:g.easing[e[3]]?e[3]:h,complete:d(a,f,l),step:c(a,f,l)}),N(a,f,l,"animatestart"));return this};g.fn.animateLayerGroup=function(d){var c,a,b=ta.call(arguments,0),f,e;for(a=0;a<this.length;a+=1)if(c=g(this[a]),f=c.getLayerGroup(d))for(e=
0;e<f.length;e+=1)b[0]=f[e],c.animateLayer.apply(c,b);return this};g.fn.delayLayer=function(d,c){var a,b,f,e;c=c||0;for(b=0;b<this.length;b+=1)if(a=g(this[b]),f=E(this[b]),e=a.getLayer(d))g(e).delay(c),N(a,f,e,"delay");return this};g.fn.delayLayerGroup=function(d,c){var a,b,f,e,l;c=c||0;for(b=0;b<this.length;b+=1)if(a=g(this[b]),f=a.getLayerGroup(d))for(l=0;l<f.length;l+=1)e=f[l],a.delayLayer(e,c);return this};g.fn.stopLayer=function(d,c){var a,b,f,e;for(b=0;b<this.length;b+=1)if(a=g(this[b]),f=E(this[b]),
e=a.getLayer(d))g(e).stop(c),N(a,f,e,"stop");return this};g.fn.stopLayerGroup=function(d,c){var a,b,f,e,l;for(b=0;b<this.length;b+=1)if(a=g(this[b]),f=a.getLayerGroup(d))for(l=0;l<f.length;l+=1)e=f[l],a.stopLayer(e,c);return this};(function(d){var c;for(c=0;c<d.length;c+=1)g.fx.step[d[c]]=Wa})("color backgroundColor borderColor borderTopColor borderRightColor borderBottomColor borderLeftColor fillStyle outlineColor strokeStyle shadowColor".split(" "));W.touchEvents={mousedown:"touchstart",mouseup:"touchend",
mousemove:"touchmove"};W.mouseEvents={touchstart:"mousedown",touchend:"mouseup",touchmove:"mousemove"};(function(d){var c;for(c=0;c<d.length;c+=1)Za(d[c])})("click dblclick mousedown mouseup mousemove mouseover mouseout touchstart touchmove touchend".split(" "));g.event.fix=function(d){var c,a;d=bb.call(g.event,d);if(c=d.originalEvent)if(a=c.changedTouches,d.pageX!==k&&d.offsetX===k){if(c=g(d.currentTarget).offset())d.offsetX=d.pageX-c.left,d.offsetY=d.pageY-c.top}else a&&(c=g(d.currentTarget).offset())&&
(d.offsetX=a[0].pageX-c.left,d.offsetY=a[0].pageY-c.top);return d};W.drawings={arc:"drawArc",bezier:"drawBezier",ellipse:"drawEllipse","function":"draw",image:"drawImage",line:"drawLine",path:"drawPath",polygon:"drawPolygon",slice:"drawSlice",quadratic:"drawQuadratic",rectangle:"drawRect",text:"drawText",vector:"drawVector",save:"saveCanvas",restore:"restoreCanvas",rotate:"rotateCanvas",scale:"scaleCanvas",translate:"translateCanvas"};g.fn.draw=function c(a){var b,f,e=new H(a);if(W.drawings[e.type]&&
"function"!==e.type)this[W.drawings[e.type]](a);else for(b=0;b<this.length;b+=1)if(g(this[b]),f=J(this[b]))e=new H(a),M(this[b],e,a,c),e.visible&&e.fn&&e.fn.call(this[b],f,e);return this};g.fn.clearCanvas=function a(b){var f,e,l=new H(b);for(f=0;f<this.length;f+=1)if(e=J(this[f]))l.width===h||l.height===h?(e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,this[f].width,this[f].height),e.restore()):(M(this[f],l,b,a),Q(this[f],e,l,l.width,l.height),e.clearRect(l.x-l.width/2,l.y-l.height/2,l.width,
l.height),l._transformed&&e.restore());return this};g.fn.saveCanvas=function b(f){var e,l,g,h,y;for(e=0;e<this.length;e+=1)if(l=J(this[e]))for(h=E(this[e]),g=new H(f),M(this[e],g,f,b),y=0;y<g.count;y+=1)da(l,h);return this};g.fn.restoreCanvas=function f(e){var l,g,h,y,x;for(l=0;l<this.length;l+=1)if(g=J(this[l]))for(y=E(this[l]),h=new H(e),M(this[l],h,e,f),x=0;x<h.count;x+=1){var k=g,A=y;0===A.savedTransforms.length?A.transforms=ja(na):(k.restore(),A.transforms=A.savedTransforms.pop())}return this};
g.fn.rotateCanvas=function e(l){var g,h,y,x;for(g=0;g<this.length;g+=1)if(h=J(this[g]))x=E(this[g]),y=new H(l),M(this[g],y,l,e),y.autosave&&da(h,x),za(h,y,x.transforms);return this};g.fn.scaleCanvas=function l(g){var h,y,x,k;for(h=0;h<this.length;h+=1)if(y=J(this[h]))k=E(this[h]),x=new H(g),M(this[h],x,g,l),x.autosave&&da(y,k),Aa(y,x,k.transforms);return this};g.fn.translateCanvas=function Ta(g){var h,x,k,A;for(h=0;h<this.length;h+=1)if(x=J(this[h]))A=E(this[h]),k=new H(g),M(this[h],k,g,Ta),k.autosave&&
da(x,A),Ba(x,k,A.transforms);return this};g.fn.drawRect=function u(g){var h,k,A,L,z,q,n,F,I;for(h=0;h<this.length;h+=1)if(k=J(this[h]))A=new H(g),M(this[h],A,g,u),A.visible&&(R(this[h],k,A),Q(this[h],k,A,A.width,A.height),k.beginPath(),A.width&&A.height&&(L=A.x-A.width/2,z=A.y-A.height/2,(F=ab(A.cornerRadius))?(q=A.x+A.width/2,n=A.y+A.height/2,0>A.width&&(I=L,L=q,q=I),0>A.height&&(I=z,z=n,n=I),0>q-L-2*F&&(F=(q-L)/2),0>n-z-2*F&&(F=(n-z)/2),k.moveTo(L+F,z),k.lineTo(q-F,z),k.arc(q-F,z+F,F,3*D/2,2*D,
w),k.lineTo(q,n-F),k.arc(q-F,n-F,F,0,D/2,w),k.lineTo(L+F,n),k.arc(L+F,n-F,F,D/2,D,w),k.lineTo(L,z+F),k.arc(L+F,z+F,F,D,3*D/2,w),A.closed=p):k.rect(L,z,A.width,A.height)),S(this[h],k,A),V(this[h],k,A));return this};g.fn.drawArc=function y(g){var h,k,L;for(h=0;h<this.length;h+=1)if(k=J(this[h]))L=new H(g),M(this[h],L,g,y),L.visible&&(R(this[h],k,L),Q(this[h],k,L,2*L.radius),k.beginPath(),Ja(this[h],k,L,L),S(this[h],k,L),V(this[h],k,L));return this};g.fn.drawEllipse=function x(g){var h,k,z,q,n;for(h=
0;h<this.length;h+=1)if(k=J(this[h]))z=new H(g),M(this[h],z,g,x),z.visible&&(R(this[h],k,z),Q(this[h],k,z,z.width,z.height),q=4/3*z.width,n=z.height,k.beginPath(),k.moveTo(z.x,z.y-n/2),k.bezierCurveTo(z.x-q/2,z.y-n/2,z.x-q/2,z.y+n/2,z.x,z.y+n/2),k.bezierCurveTo(z.x+q/2,z.y+n/2,z.x+q/2,z.y-n/2,z.x,z.y-n/2),S(this[h],k,z),z.closed=p,V(this[h],k,z));return this};g.fn.drawPolygon=function ka(g){var h,k,q,n,F,I,P,C,t,m;for(h=0;h<this.length;h+=1)if(k=J(this[h]))if(q=new H(g),M(this[h],q,g,ka),q.visible){R(this[h],
k,q);Q(this[h],k,q,2*q.radius);F=2*D/q.sides;I=F/2;n=I+D/2;P=q.radius*K(I);k.beginPath();for(m=0;m<q.sides;m+=1)C=q.x+q.radius*K(n),t=q.y+q.radius*O(n),k.lineTo(C,t),q.concavity&&(C=q.x+(P+-P*q.concavity)*K(n+I),t=q.y+(P+-P*q.concavity)*O(n+I),k.lineTo(C,t)),n+=F;S(this[h],k,q);q.closed=p;V(this[h],k,q)}return this};g.fn.drawSlice=function A(h){var k,q,n,F,I;for(k=0;k<this.length;k+=1)if(g(this[k]),q=J(this[k]))n=new H(h),M(this[k],n,h,A),n.visible&&(R(this[k],q,n),Q(this[k],q,n,2*n.radius),n.start*=
n._toRad,n.end*=n._toRad,n.start-=D/2,n.end-=D/2,n.start=Ia(n.start),n.end=Ia(n.end),n.end<n.start&&(n.end+=2*D),F=(n.start+n.end)/2,I=n.radius*n.spread*K(F),F=n.radius*n.spread*O(F),n.x+=I,n.y+=F,q.beginPath(),q.arc(n.x,n.y,n.radius,n.start,n.end,n.ccw),q.lineTo(n.x,n.y),S(this[k],q,n),n.closed=p,V(this[k],q,n));return this};g.fn.drawLine=function L(h){var g,n,k;for(g=0;g<this.length;g+=1)if(n=J(this[g]))k=new H(h),M(this[g],k,h,L),k.visible&&(R(this[g],n,k),Q(this[g],n,k),n.beginPath(),La(this[g],
n,k,k),S(this[g],n,k),V(this[g],n,k));return this};g.fn.drawQuadratic=function z(g){var h,k,I;for(h=0;h<this.length;h+=1)if(k=J(this[h]))I=new H(g),M(this[h],I,g,z),I.visible&&(R(this[h],k,I),Q(this[h],k,I),k.beginPath(),Ma(this[h],k,I,I),S(this[h],k,I),V(this[h],k,I));return this};g.fn.drawBezier=function q(h){var g,k,P;for(g=0;g<this.length;g+=1)if(k=J(this[g]))P=new H(h),M(this[g],P,h,q),P.visible&&(R(this[g],k,P),Q(this[g],k,P),k.beginPath(),Na(this[g],k,P,P),S(this[g],k,P),V(this[g],k,P));return this};
g.fn.drawVector=function n(g){var h,k,C;for(h=0;h<this.length;h+=1)if(k=J(this[h]))C=new H(g),M(this[h],C,g,n),C.visible&&(R(this[h],k,C),Q(this[h],k,C),k.beginPath(),Qa(this[h],k,C,C),S(this[h],k,C),V(this[h],k,C));return this};g.fn.drawPath=function F(h){var g,C,t,m,v;for(g=0;g<this.length;g+=1)if(C=J(this[g]))if(t=new H(h),M(this[g],t,h,F),t.visible){R(this[g],C,t);Q(this[g],C,t);C.beginPath();for(m=1;p;)if(v=t["p"+m],v!==k)v=new H(v),"line"===v.type?La(this[g],C,t,v):"quadratic"===v.type?Ma(this[g],
C,t,v):"bezier"===v.type?Na(this[g],C,t,v):"vector"===v.type?Qa(this[g],C,t,v):"arc"===v.type&&Ja(this[g],C,t,v),m+=1;else break;S(this[g],C,t);V(this[g],C,t)}return this};g.fn.drawText=function I(k){var C,t,m,v,T,s,B,p,G,w;for(C=0;C<this.length;C+=1)if(g(this[C]),t=J(this[C]))if(m=new H(k),v=M(this[C],m,k,I),m.visible){R(this[C],t,m);t.textBaseline=m.baseline;t.textAlign=m.align;ra(this[C],t,m);T=m.maxWidth!==h?Ra(t,m):m.text.toString().split("\n");sa(this[C],t,m,T);v&&(v.width=m.width,v.height=
m.height);Q(this[C],t,m,m.width,m.height);B=m.x;"left"===m.align?m.respectAlign?m.x+=m.width/2:B-=m.width/2:"right"===m.align&&(m.respectAlign?m.x-=m.width/2:B+=m.width/2);if(m.radius)for(B=$(m.fontSize),m.letterSpacing===h&&(m.letterSpacing=B/500),s=0;s<T.length;s+=1){t.save();t.translate(m.x,m.y);v=T[s];p=v.length;t.rotate(-(D*m.letterSpacing*(p-1))/2);for(w=0;w<p;w+=1)G=v[w],0!==w&&t.rotate(D*m.letterSpacing),t.save(),t.translate(0,-m.radius),t.fillText(G,0,0),t.restore();m.radius-=B;m.letterSpacing+=
B/(1E3*D);t.restore()}else for(s=0;s<T.length;s+=1)v=T[s],p=m.y+s*m.height/T.length-(T.length-1)*m.height/T.length/2,t.shadowColor=m.shadowColor,t.fillText(v,B,p),"transparent"!==m.fillStyle&&(t.shadowColor="transparent"),0!==m.strokeWidth&&t.strokeText(v,B,p);p=0;"top"===m.baseline?p+=m.height/2:"bottom"===m.baseline&&(p-=m.height/2);m._event&&(t.beginPath(),t.rect(m.x-m.width/2,m.y-m.height/2+p,m.width,m.height),S(this[C],t,m),t.closePath());m._transformed&&t.restore()}aa.propCache=m;return this};
g.fn.measureText=function(g){var h,k;h=this.getLayer(g);if(!h||h&&!h._layer)h=new H(g);if(g=J(this[0]))ra(this[0],g,h),k=Ra(g,h),sa(this[0],g,h,k);return h};g.fn.drawImage=function P(k){function t(k,m,t,r,s){return function(){var v=g(k);R(k,m,r);r.width===h&&r.sWidth===h&&(r.width=r.sWidth=G.width);r.height===h&&r.sHeight===h&&(r.height=r.sHeight=G.height);s&&(s.width=r.width,s.height=r.height);r.sWidth!==h&&r.sHeight!==h&&r.sx!==h&&r.sy!==h?(r.width===h&&(r.width=r.sWidth),r.height===h&&(r.height=
r.sHeight),r.cropFromCenter&&(r.sx+=r.sWidth/2,r.sy+=r.sHeight/2),0>r.sy-r.sHeight/2&&(r.sy=r.sHeight/2),r.sy+r.sHeight/2>G.height&&(r.sy=G.height-r.sHeight/2),0>r.sx-r.sWidth/2&&(r.sx=r.sWidth/2),r.sx+r.sWidth/2>G.width&&(r.sx=G.width-r.sWidth/2),Q(k,m,r,r.width,r.height),m.drawImage(G,r.sx-r.sWidth/2,r.sy-r.sHeight/2,r.sWidth,r.sHeight,r.x-r.width/2,r.y-r.height/2,r.width,r.height)):(Q(k,m,r,r.width,r.height),m.drawImage(G,r.x-r.width/2,r.y-r.height/2,r.width,r.height));m.beginPath();m.rect(r.x-
r.width/2,r.y-r.height/2,r.width,r.height);S(k,m,r);m.closePath();r._transformed&&m.restore();ya(m,t,r);r.layer?N(v,t,s,"load"):r.load&&r.load.call(v[0],s);r.layer&&(s._masks=t.transforms.masks.slice(0),r._next&&v.drawLayers({clear:w,resetFire:p,index:r._next}))}}var m,v,T,s,B,D,G,ua,K,O=aa.imageCache;for(v=0;v<this.length;v+=1)if(m=this[v],T=J(this[v]))s=E(this[v]),B=new H(k),D=M(this[v],B,k,P),B.visible&&(K=B.source,ua=K.getContext,K.src||ua?G=K:K&&(O[K]&&O[K].complete?G=O[K]:(G=new wa,K.match(/^data:/i)||
(G.crossOrigin=B.crossOrigin),G.src=K,O[K]=G)),G&&(G.complete||ua?t(m,T,s,B,D)():(G.onload=t(m,T,s,B,D),G.src=G.src)));return this};g.fn.createPattern=function(k){function C(){s=m.createPattern(p,v.repeat);v.load&&v.load.call(t[0],s)}var t=this,m,v,p,s,B;(m=J(t[0]))?(v=new H(k),B=v.source,ca(B)?(p=g("<canvas />")[0],p.width=v.width,p.height=v.height,k=J(p),B.call(p,k),C()):(k=B.getContext,B.src||k?p=B:(p=new wa,p.crossOrigin=v.crossOrigin,p.src=B),p.complete||k?C():(p.onload=C(),p.src=p.src))):s=
h;return s};g.fn.createGradient=function(g){var p,t=[],m,v,w,s,B,D,G;g=new H(g);if(p=J(this[0])){g.x1=g.x1||0;g.y1=g.y1||0;g.x2=g.x2||0;g.y2=g.y2||0;p=g.r1!==h&&g.r2!==h?p.createRadialGradient(g.x1,g.y1,g.r1,g.x2,g.y2,g.r2):p.createLinearGradient(g.x1,g.y1,g.x2,g.y2);for(s=1;g["c"+s]!==k;s+=1)g["s"+s]!==k?t.push(g["s"+s]):t.push(h);m=t.length;t[0]===h&&(t[0]=0);t[m-1]===h&&(t[m-1]=1);for(s=0;s<m;s+=1){if(t[s]!==h){D=1;G=0;v=t[s];for(B=s+1;B<m;B+=1)if(t[B]!==h){w=t[B];break}else D+=1;v>w&&(t[B]=t[s])}else t[s]===
h&&(G+=1,t[s]=v+(w-v)/D*G);p.addColorStop(t[s],g["c"+(s+1)])}}else p=h;return p};g.fn.setPixels=function C(g){var k,p,w,s,B,D,G,E,K;for(p=0;p<this.length;p+=1)if(k=this[p],w=J(k)){s=new H(g);M(k,s,g,C);Q(this[p],w,s,s.width,s.height);if(s.width===h||s.height===h)s.width=k.width,s.height=k.height,s.x=s.width/2,s.y=s.height/2;if(0!==s.width&&0!==s.height){D=w.getImageData(s.x-s.width/2,s.y-s.height/2,s.width,s.height);G=D.data;K=G.length;if(s.each)for(E=0;E<K;E+=4)B={r:G[E],g:G[E+1],b:G[E+2],a:G[E+
3]},s.each.call(k,B,s),G[E]=B.r,G[E+1]=B.g,G[E+2]=B.b,G[E+3]=B.a;w.putImageData(D,s.x-s.width/2,s.y-s.height/2);w.restore()}}return this};g.fn.getCanvasImage=function(g,t){var m,p=h;0!==this.length&&(m=this[0],m.toDataURL&&(t===k&&(t=1),p=m.toDataURL("image/"+g,t)));return p};g.fn.detectPixelRatio=function(h){var k,m,v,w,s,B,D;for(m=0;m<this.length;m+=1)k=this[m],g(this[m]),v=J(k),D=E(this[m]),D.scaled||(w=window.devicePixelRatio||1,s=v.webkitBackingStorePixelRatio||v.mozBackingStorePixelRatio||v.msBackingStorePixelRatio||
v.oBackingStorePixelRatio||v.backingStorePixelRatio||1,w/=s,1!==w&&(s=k.width,B=k.height,k.width=s*w,k.height=B*w,k.style.width=s+"px",k.style.height=B+"px",v.scale(w,w)),D.pixelRatio=w,D.scaled=p,h&&h.call(k,w));return this};X.clearCache=function(){for(var g in aa)aa.hasOwnProperty(g)&&(aa[g]={})};g.support.canvas=g("<canvas />")[0].getContext!==k;Y(X,{defaults:la,setGlobalProps:R,transformShape:Q,detectEvents:S,closePath:V,setCanvasFont:ra,measureText:sa});g.jCanvas=X;g.jCanvasObject=H})(jQuery,
document,Image,Array,Math,parseFloat,!0,!1,null);
